<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Set使用</title>
    <script src="../js/traceur.js"></script>
    <script src="../js/BrowserSystem.js"></script>
    <script src="../js/bootstrap.js"></script>
</head>

<body>
    <h1>Set使用</h1>
    <script type="module">
        console.info("//---------------------------------------------------------------------");
        console.info("// [1] 基本用法");
        console.info("//---------------------------------------------------------------------");
        console.info("");

        console.info("Set本身是一个构造函数，用来生成Set数据结构。Set结构不会添加重复的值。");
        var set = new Set();
        [2, 3, 5, 4, 5, 2, 2].map(x => set.add(x));
        for (let i of set) {
            console.log(i);
        }

        console.info("Set函数可以接受一个数组（或类似数组的对象）作为参数，用来初始化。");
        var set2 = new Set([1, 2, 3, 4, 4]);
        console.log([...set2]); // [1, 2, 3, 4]
        console.log(set2.size); // 4

        console.info("向Set加入值的时候，不会发生类型转换，所以5和\"5\"是两个不同的值。");
        var set3 = new Set([1, "1", 2, 2]);
        console.log([...set3]);

        console.info("在Set内部，两个NaN是相等。");
        let set4 = new Set();
        let a = NaN;
        let b = NaN;
        set4.add(a);
        set4.add(b);
        console.log([...set4]);

        console.info("由于两个空对象不相等，所以它们被视为两个值。");
        let set5 = new Set();

        set5.add({});
        console.log(set5.size); // 1

        set5.add({});
        console.log(set5.size); // 2

        console.info("//---------------------------------------------------------------------");
        console.info("");
    </script>
    <script type="module">
        console.info("//---------------------------------------------------------------------");
        console.info("// [2] Set实例的属性和方法");
        console.info("//---------------------------------------------------------------------");
        console.info("");

        console.info("语法");
        let set = new Set();
        set.add(1).add(2).add(2);
        console.log(set.size);   // 2

        console.log(set.has(1)); // true
        console.log(set.has(2)); // true
        console.log(set.has(3)); // false

        console.log(set.delete(2)); // true
        console.log(set.has(2));    // false

        console.info("将Set结构转为数组");
        var items = new Set([1, 2, 3, 4, 5]);
        console.info("=>方法1")；
        console.info();
        var array = Array.from(items);
        console.info();

        console.info("//---------------------------------------------------------------------");
        console.info("");
    </script>
</body>

</html>
